/* ========================================================================== */
/* ks-dir.css – Offers Directory (Hero, Filter, Map, List, FAQ tweaks)        */
/* ========================================================================== */

@layer pages {
  /* ------------------------------------------------------------------------ */
  /* JS-FLAG gegen FOUC (Flash vom nativen Select)                             */
  /* ------------------------------------------------------------------------ */

  .ks-js #ksDir [data-filters] .ks-field__control--select select {
    opacity: 0 !important;
    pointer-events: none !important;
  }

  #ksDir .ks-field__control--select.is-enhanced .ks-field__icon {
    display: none !important;
  }

  /* ------------------------------------------------------------------------ */
  /* Layout: Map | Liste                                                       */
  /* ------------------------------------------------------------------------ */

  body.ks-modal-open {
    overflow: hidden;
  }

  .ks-dir__layout {
    display: grid;
    grid-template-columns: minmax(420px, 1fr) 1fr;
    gap: 16px;
    align-items: start;
    margin-top: 12px;
  }

  .ks-dir__map {
    position: sticky;
    top: calc(var(--header-height, 72px) + 12px);
  }

  .ks-map {
    width: 100%;
    border-radius: 12px;
    overflow: hidden;
    background: #e5e7eb;
  }

  .ks-dir__map .ks-map {
    height: min(520px, calc(100dvh - var(--header-height, 72px) - 24px));
  }

  @media (max-width: 900px) {
    .ks-dir__layout {
      grid-template-columns: 1fr;
    }
    .ks-dir__map {
      position: static;
      top: auto;
    }
    .ks-dir__map .ks-map {
      height: 320px;
    }
  }

  .ks-dir__listwrap {
    --row-h: 120px;
    --row-gap: 12px;
    max-height: calc(3 * var(--row-h) + 2 * var(--row-gap));
    overflow-y: auto;
  }

  .ks-dir__list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: 12px;
  }

  /* ------------------------------------------------------------------------ */
  /* Hero (wie Home)                                                           */
  /* ------------------------------------------------------------------------ */

  :root {
    --ks-container: 1440px;
  }

  .ks-dir__hero {
    position: relative;
    width: 100vw;
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
    padding: clamp(24px, 6vw, 56px) 0;
    background: var(--light-gray);
    overflow: hidden;
  }

  .ks-dir__hero::before {
    content: "";
    position: absolute;
    inset: 0;
    background: none;
  }

  .ks-dir__hero::after {
    content: attr(data-watermark);
    position: absolute;
    left: 0;
    right: 0;
    bottom: 6%;
    text-align: center;
    font-weight: 900;
    letter-spacing: 0.02em;
    font-size: clamp(64px, 22vw, 240px);
    color: rgba(0, 0, 0, 0.04);
    pointer-events: none;
    white-space: nowrap;
  }

  .ks-dir__hero-inner {
    position: relative;
    z-index: 1;

    max-width: var(--ks-container);
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: 16px;
    padding-right: 16px;

    padding-top: clamp(16px, 4vw, 62px);
    padding-bottom: clamp(16px, 4vw, 32px);
    color: var(--text);
  }

  .ks-dir__crumb {
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: #6b7280;
    margin-bottom: 6px;
  }

  .ks-dir__crumb .sep {
    margin: 0 0.35em;
    opacity: 0.7;
  }

  .ks-dir__hero-title {
    margin: 0 0 8px;
    font-weight: 800;
    line-height: 1.05;
    font-size: clamp(36px, 6vw, 72px);
  }

  .ks-dir__hero-inner::before {
    content: "";
    position: absolute;
    right: 40px;
    top: 80%;
    transform: translateY(-50%);
    width: min(620px, 50vw);
    height: clamp(320px, 55vw, 620px);
    background: var(--hero-img) center right / contain no-repeat;
    pointer-events: none;
  }

  @media (max-width: 900px) {
    .ks-dir__hero-inner {
      padding-bottom: clamp(24px, 8vw, 40px);
    }
    .ks-dir__hero-inner::before {
      right: 50%;
      transform: translateX(50%);
      width: min(420px, 70vw);
      height: clamp(220px, 60vw, 420px);
    }
  }

  .ks-dir__intro,
  .ks-dir__filters,
  .ks-dir__meta {
    max-width: 1440px;
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: 16px;
    padding-right: 16px;
  }

  .ks-dir__intro {
    margin: 10px 0 6px;
    text-align: center;
    position: relative;
    z-index: 1;
  }

  .ks-dir__intro::before {
    content: "ANGEBOTE";
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: 10px;
    font-weight: 900;
    letter-spacing: 0.03em;
    font-size: clamp(72px, 18vw, 120px);
    color: rgba(0, 0, 0, 0.03);
    pointer-events: none;
    z-index: -1;
  }

  .ks-dir__kicker {
    margin: 0 0 4px;
    line-height: 1.4;
    min-height: 1.4em;
    color: #555;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-size: 12px;
  }

  .ks-dir__kicker--hidden {
    visibility: hidden;
  }

  .ks-dir__title {
    font-weight: 800;
    font-size: 52px;
    color: var(--text);
    line-height: 1.05;
    margin: 0;
  }

  .ks-dir__meta {
    margin: 6px 0 4px;
    color: #475569;
    text-align: center;
  }

  .ks-py-56 {
    padding-block: 56px;
  }

  #ksDir {
    position: relative;
    z-index: 0;
  }

  #ksDir::before {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
    background: var(--dark-gray);
    z-index: -1;
  }

  /* ------------------------------------------------------------------------ */
  /* Filter-Zeile                                                              */
  /* ------------------------------------------------------------------------ */

  .ks-dir__filters {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: flex-end;
    justify-content: center;
    margin: 10px 0;
  }

  .ks-dir .ks-field {
    display: flex;
    flex-direction: column;
    gap: 6px;
    min-width: 280px;
    font-size: 14px;
    color: #2a3036;
  }

  @media (max-width: 520px) {
    .ks-dir .ks-field {
      min-width: 220px;
    }
  }

  .ks-dir .ks-field span {
    font-weight: 600;
  }

  /* ------------------------------------------------------------------------ */
  /* Basis-Control                                                             */
  /* ------------------------------------------------------------------------ */

  #ksDir .ks-field__control--select {
    position: relative;
    height: 50px;
    border-radius: 10px;
    background: #fff;
    border: 1px solid #e3e6e8;
  }

  /* ------------------------------------------------------------------------ */
  /* CUSTOM DROPDOWN (Namespace: ks-dir-dd)                                    */
  /* ------------------------------------------------------------------------ */

  #ksDir .ks-dir-dd {
    position: relative;
    width: 100%;
  }

  #ksDir .ks-dir-dd__btn {
    width: 100%;
    height: 46px;
    border-radius: 10px;
    border: 0;
    background: transparent;
    padding: 0 44px 0 14px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    cursor: pointer;
    text-align: left;

    white-space: nowrap;
    overflow: hidden;
  }

  #ksDir .ks-dir-dd__label {
    flex: 1;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  #ksDir .ks-dir-dd__caret {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    pointer-events: none;
  }

  #ksDir .ks-dir-dd__caret img {
    width: 18px;
    height: 18px;
    display: block;
    transition: transform 0.18s ease;
  }

  #ksDir .ks-dir-dd[aria-expanded="true"] .ks-dir-dd__caret img {
    transform: rotate(180deg);
  }

  #ksDir .ks-dir-dd__panel {
    position: absolute;
    left: 0;
    right: 0;
    top: calc(100% + 8px);
    background: #fff;
    border: 1px solid #e3e6e8;
    border-radius: 12px;
    box-shadow: 0 16px 40px rgba(0, 0, 0, 0.14);
    display: none;
    z-index: 50;

    padding: 0;
    max-height: 240px;
    overflow-y: auto;
    overflow-x: hidden;
  }

  #ksDir .ks-dir-dd[aria-expanded="true"] .ks-dir-dd__panel {
    display: block;
  }

  #ksDir .ks-dir-dd__option {
    height: 44px;
    padding: 0 12px;
    display: flex;
    align-items: center;

    cursor: pointer;
    user-select: none;

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    border-radius: 0;
  }

  #ksDir .ks-dir-dd__option:hover {
    background: rgba(15, 23, 42, 0.06);
  }

  #ksDir .ks-dir-dd__option:focus {
    background: transparent;
    box-shadow: none;
    outline: 0;
  }

  #ksDir .ks-dir-dd__option:focus-visible {
    box-shadow: 0 0 0 2px color-mix(in oklab, var(--brand-navy) 35%, #fff);
    background: rgba(15, 23, 42, 0.06);
  }

  #ksDir .ks-dir-dd__option[aria-selected="true"] {
    background: #111827;
    color: #fff;
    border-radius: 0;
  }

  #ksDir .ks-dir-dd__option[data-placeholder="1"] {
    cursor: default;
  }

  @media (prefers-reduced-motion: reduce) {
    #ksDir .ks-dir-dd__caret img {
      transition: none;
    }
  }

  /* ------------------------------------------------------------------------ */
  /* Sessions / Cards                                                          */
  /* ------------------------------------------------------------------------ */

  .ks-offer__sessions {
    display: grid;
    gap: 12px;
    margin-top: 12px;
  }

  .ks-session {
    display: grid;
    grid-template-columns: 1fr auto auto;
    align-items: center;
    gap: 16px;
    border: 1px solid #eaeaea;
    border-radius: 10px;
    background: #fff;
    padding: 12px 14px;
  }

  .ks-session__left {
    display: grid;
    gap: 2px;
  }
  .ks-session__row {
    font-size: 14px;
    color: #111;
  }

  .ks-session__coach {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    min-width: 180px;
  }

  .ks-coach__avatar {
    width: 50px;
    height: 50px;
    border-radius: 999px;
    object-fit: cover;
    background: #f1f5f9;
    border: 1px solid #eaeaea;
    display: block;
  }

  .ks-coach__name {
    display: flex;
    flex-direction: column;
    line-height: 1.05;
  }
  .ks-coach__first {
    font-weight: 700;
  }
  .ks-coach__last {
    color: #475569;
    font-size: 13px;
  }

  .ks-session__actions {
    display: flex;
    justify-content: flex-end;
    flex-direction: row-reverse;
    align-items: center;
    gap: 20px;
  }

  .ks-session__btn {
    transition: transform 0.08s ease, box-shadow 0.12s ease,
      background-color 0.12s ease;
  }

  .ks-session__btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 16px rgba(14, 165, 233, 0.25);
    background: #0c96d2;
  }

  @media (max-width: 560px) {
    .ks-session {
      grid-template-columns: 1fr;
      gap: 10px;
    }
    .ks-session__actions {
      justify-content: stretch;
    }
    .ks-session__btn {
      width: 100%;
    }
  }

  .ks-session.ks-session--selectable:hover {
    background: #f5f5f5;
  }
  .ks-session.ks-session--selectable.ks-session--selected {
    background: #e5e5e5;
    border-color: #d4d4d4;
  }

  /* ------------------------------------------------------------------------ */
  /* FAQ Grid                                                                  */
  /* ------------------------------------------------------------------------ */

  .ks-dir-faq__grid {
    display: grid;
    grid-template-columns: 1.2fr 1fr;
    gap: 24px;
    align-items: start;
  }

  @media (max-width: 900px) {
    .ks-dir-faq__grid {
      grid-template-columns: 1fr;
    }
  }

  /* ------------------------------------------------------------------------ */
  /* Page Title hidden (Franchise)                                             */
  /* ------------------------------------------------------------------------ */

  .page-id-312 .entry-title,
  .page-id-312 h1.entry-title {
    display: none !important;
  }

  /* =========================================================
   KS DIR: Rand kommt vom Wrapper, nicht vom Button
   (verhindert dicken/ grauen Doppel-Rand)
   ========================================================= */

  #ksDir .ks-dir-dd__btn {
    border: 0 !important;
    background: transparent !important;
    box-shadow: none !important;
  }

  /* Hover: genau wie vorher – aber auf dem Wrapper */
  #ksDir .ks-field__control--select:hover {
    border-color: var(--text, #111827);
  }

  /* Focus/Open: auch Wrapper (kein dicker Doppelrand) */
  #ksDir .ks-field__control--select:focus-within {
    outline: 0;
    border-color: var(--brand-navy);
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--brand-navy) 22%, #fff);
  }
}
